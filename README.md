# Код исследования

При запуске работы программы происходит загрузка классов с помощью подсистемы ClassLoader. То есть когда в коде встречается новый класс - он отдаётся на загрузку в систему загрузчиков классов - стадия Loading. В коде ниже у нас загрузятся классы:
 
1. JvmComprehension
2. String
3. Object
4. Integer
 
После того как загрузились классы переходим на следующую стадию "Связанные Linking". Она состоит из 3 этаапов:
 
1. Verify (проверка того, что код загрузился и код валидный)
2. Prepare (подготовка программы к выполнению: подготовка примитивов в статических классов)
3. Resolve

И последняя стадия Initialization: выполняются static инициализаторы и иницализаторы static полей, то есть в программе ниже инициализируются (public static void) main и printall

Данные при выполнении программы попадают в области памяти:
1. Metaspace
2. Stack Memory - для хранения ссылок на ссылочные типы и занчимых типов
3. Heap (куча) - для хранения ссылочных типов данных
 
public class JvmComprehension {

    public static void main(String[] args) { // Создаётся новый фрейм в Stack memory - main()
        int i = 1;                      // 1 В Stack memory в фрейме main() записывается int i = 1 (т.к. примитивный тип)
        Object o = new Object();        // 2 Оператор new резервирует место под этот объект в куче. 
                                        // Дальше отрабатывает конструктор - создаёт метод (Object) в куче. 
                                        // После того как объект создан - ссылка на него присвается в левую часть выражения в "o". 
                                        // И ссылка записывется в Stack memory в фрейме main().
        Integer ii = 2;                 // 3 Происходит создание нового объекта "Integer" в куче, 
                                        // и ссылка на эту строку будет присвоена в перменну ii, 
                                        // которая будет находится внутри Stack memory в фрейме main().
        printAll(o, i, ii);             // 4 Создаётся новый фрейм в Stack memory - printAll() и идёт его заполнение.
        System.out.println("finished"); // 7 В Stack memory создаётся новый фрейм - println. 
                                        // Перед этим будет создан String Pool в куче, ссылка на которую будет передана в созданный фрейм.
    }
 
    private static void printAll(Object o, int i, Integer ii) {
        Integer uselessVar = 700;                   // 5 Также как и в 3 пункте: создание объекта "Integer" в куче, 
                                                    // а ссылка добавиться в Stack memory в фрейме printAll()
        System.out.println(o.toString() + i + ii);  // 6 В Stack memory создаётся новый фрейм - println. 
                                                    // Перед этим будет создан String Pool в куче, 
                                                    // ссылка на которую будет передана в созданный фрейм
    }
}
 
Сборка мусора (GC): Периодически сборщик мусора собирает объекты из памяти Heap, которые больше не используются, из памяти путем обхода графа достижимых объектов: удаляются недостижимые объекты. Обычно при сборке мусора приостанавливается работа всей программы - Stop The World пауза (это полная остановка потоков программы для безопасноти сборки мусора).
